<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Catch the Subscribe!</title>
<style>
  body {
    margin: 0;
    height: 100vh;
    overflow: hidden;
    font-family: Arial, sans-serif;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    background: linear-gradient(120deg, #0f0c29, #302b63, #24243e);
    user-select: none;
  }

  #target {
    width: 70px;
    height: 70px;
    position: absolute;
    cursor: pointer;
    pointer-events: auto;
    transition: transform 0.1s ease, left 0.1s ease, top 0.1s ease;
  }

  #scoreboard, #timer {
    position: fixed;
    top: 20px;
    font-size: 1.5rem;
    text-shadow: 2px 2px 5px black;
  }

  #timer {
    top: 50px;
    font-size: 1.3rem;
  }

  #controls {
    position: fixed;
    top: 90px;
    display: flex;
    gap: 10px;
    align-items: center;
  }

  #message {
    position: fixed;
    top: 50%;
    transform: translateY(-50%);
    font-size: 2.2rem;
    display: none;
    color: gold;
    text-shadow: 2px 2px 5px black;
    text-align: center;
  }

  #restartBtn {
    display: none;
    margin-top: 20px;
    padding: 10px 20px;
    font-size: 1.2rem;
    background: gold;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: transform 0.2s, background 0.2s;
  }

  #restartBtn:hover {
    transform: scale(1.1);
    background: #ffc107;
  }

  .particle {
    position: absolute;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    pointer-events: none;
    background: yellow;
    opacity: 0.8;
    animation: fade 0.6s linear forwards;
  }

  @keyframes fade {
    0% { transform: translateY(0px) scale(1); opacity: 1; }
    100% { transform: translateY(-50px) scale(0.5); opacity: 0; }
  }

  input[type="number"] {
    width: 60px;
    padding: 3px;
    border-radius: 5px;
    border: none;
    font-size: 1rem;
  }
</style>
</head>
<body>

<div id="scoreboard">Score: 0</div>
<div id="timer">Time: 30</div>

<div id="controls">
  <label>Set Timer: <input id="timerInput" type="number" value="30" min="5" max="300"> sec</label>
  <button id="startBtn">Start Game</button>
</div>

<div id="message"></div>
<button id="restartBtn">Restart Game</button>

<img id="target" src="https://upload.wikimedia.org/wikipedia/commons/0/09/YouTube_full-color_icon_%282017%29.svg" alt="Subscribe">

<script>
const target = document.getElementById('target');
const scoreDisplay = document.getElementById('scoreboard');
const timerDisplay = document.getElementById('timer');
const message = document.getElementById('message');
const restartBtn = document.getElementById('restartBtn');
const startBtn = document.getElementById('startBtn');
const timerInput = document.getElementById('timerInput');

let score = 0;
let time = 30;
let gameInterval;
let gameActive = false;

// Spawn particles
function spawnParticles(x, y) {
  for (let i = 0; i < 7; i++) {
    const p = document.createElement('div');
    p.className = 'particle';
    p.style.left = x + 'px';
    p.style.top = y + 'px';
    document.body.appendChild(p);
    setTimeout(() => p.remove(), 600);
  }
}

// Click handler
target.addEventListener('click', (e) => {
  if(!gameActive) return;
  score++;
  scoreDisplay.textContent = 'Score: ' + score;
  spawnParticles(e.pageX, e.pageY);
  moveTargetRandom();
});

// Countdown timer
function startTimer() {
  clearInterval(gameInterval);
  gameInterval = setInterval(() => {
    if(!gameActive) return;
    time--;
    timerDisplay.textContent = 'Time: ' + time;
    if (time <= 0) endGame();
  }, 1000);
}

// Move target randomly (on click or random jump)
function moveTargetRandom() {
  const x = Math.random() * (window.innerWidth - target.offsetWidth);
  const y = Math.random() * (window.innerHeight - target.offsetHeight);
  target.style.left = x + 'px';
  target.style.top = y + 'px';
  target.style.transform = rotate(${Math.random()*360}deg) scale(${0.8 + Math.random()*0.4});
}

// Run-away feature
document.addEventListener('mousemove', (e) => {
  if(!gameActive) return;
  const rect = target.getBoundingClientRect();
  const dx = rect.left + rect.width / 2 - e.clientX;
  const dy = rect.top + rect.height / 2 - e.clientY;
  const distance = Math.sqrt(dx*dx + dy*dy);

  if (distance < 150) {
    const speed = 8 + score*0.3;
    const moveX = (dx / distance) * speed;
    const moveY = (dy / distance) * speed;

    let newX = rect.left + moveX;
    let newY = rect.top + moveY;

    newX = Math.max(0, Math.min(window.innerWidth - rect.width, newX));
    newY = Math.max(0, Math.min(window.innerHeight - rect.height, newY));

    target.style.left = newX + 'px';
    target.style.top = newY + 'px';
  }
});

// End game
function endGame() {
  gameActive = false;
  message.textContent = Game Over! Your Score: ${score};
  message.style.display = 'block';
  restartBtn.style.display = 'inline-block';
}

// Restart game
function restartGame() {
  score = 0;
  time = parseInt(timerInput.value) || 30;
  scoreDisplay.textContent = 'Score: 0';
  timerDisplay.textContent = 'Time: ' + time;
  message.style.display = 'none';
  restartBtn.style.display = 'none';
  gameActive = true;
  moveTargetRandom();
  startTimer();
}

// Start button
startBtn.addEventListener('click', () => {
  time = parseInt(timerInput.value) || 30;
  restartGame();
});

restartBtn.addEventListener('click', restartGame);

// Initialize target position
moveTargetRandom();
</script>

</body>
</html>
